#!/usr/bin/env ruby

require "bundler/setup"
require "pub_grub"

source =
  PubGrub::StaticPackageSource.new do |s|
    s.add "foo", "2.0.0", deps: { "bar" => "~> 2.0" }
    s.add "foo", "1.1.0", deps: { "bar" => "~> 1.0" }
    s.add "foo", "1.0.0", deps: { "bar" => "~> 1.0" }

    s.add "bar", "2.0.0"
    s.add "bar", "1.0.0"
  end

foo = source.get_package("foo")
bar = source.get_package("bar")

solver = VersionSolver.new(source: source)

require 'irb'
IRB.setup(__FILE__)
workspace = IRB::WorkSpace.new(binding)
IRB::Irb.new(workspace).run(IRB.conf)
